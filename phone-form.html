<!DOCTYPE html><!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Thu Apr 08 2021 14:25:51 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="606ef31a0ebd9d54d790a772" data-wf-site="606eee904b85d3a396305721">

<head>
    <meta charset="utf-8">
    <title>Phone Form</title>
    <meta content="Phone Form" property="og:title">
    <meta content="Phone Form" property="twitter:title">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link href="css/normalize.css" rel="stylesheet" type="text/css">
    <link href="css/webflow.css" rel="stylesheet" type="text/css">
    <link href="css/interview-tests.webflow.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">
        WebFont.load({
            google: {
                families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]
            }
        });
    </script>
    <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
    <script type="text/javascript">
        ! function (o, c) {
            var n = c.documentElement,
                t = " w-mod-";
            n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n
                .className += t + "touch")
        }(window, document);
    </script>
    <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="images/webclip.png" rel="apple-touch-icon">
</head>

<body>
    <main>
        <div class="section phone-form_section">
            <div class="page-padding">
                <div class="container">
                    <div class="phone-form_grid">
                        <div class="phone-form_component w-form">
                            <form id="phone-form" name="wf-form-Phone-Form" data-name="Phone Form"
                                class="phone-form_form">
                                <div class="prefix-dropdown_component">
                                    <div id="selectedOption" class="prefix-dropdown_toggle">
                                        <div id="dynamicSelect" style="display:flex;">
                                            <img src="images/us.svg" loading="lazy" alt="United States Flag"
                                                class="prefix-dropdown_flag">
                                            <div class="prefix-dropdown_value">+1 </div>
                                        </div>
                                        <div id="dropdown-icon" class="prefix-dropdown_chevron w-embed"><svg
                                                viewbox="0 0 444 255" fill="currentColor"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M439.9 24.3L420.1 4.49998C415.4 -0.200024 407.8 -0.200024 403.1 4.49998L222 185.2L40.9 4.49998C36.2 -0.200024 28.5999 -0.200024 23.9 4.49998L4.09995 24.3C-0.600049 29 -0.600049 36.6 4.09995 41.3L213.5 250.7C218.2 255.4 225.8 255.4 230.5 250.7L439.9 41.3C444.6 36.6 444.6 29 439.9 24.3V24.3Z">
                                                </path>
                                            </svg>
                                        </div>

                                    </div>
                                    <div id="prefix-dropdown-list" class="prefix-dropdown_list-wrapper">
                                        <ul id="countries_list" role="list" class="prefix-dropdown_list">
                                            <!-- Countries list loading from API -->
                                        </ul>
                                    </div>
                                </div>
                                <input type="tel" class="text-field w-input" maxlength="256" name="phoneNumber"
                                    data-name="Phone Number" placeholder="Your phone" id="phoneNumber" required="">
                                <input type="submit" value="Get Started" data-wait="Sending..."
                                    class="button submit w-button">
                            </form>
                            <div class="success-message w-form-done">
                                <div>Thank you for your submission!</div>
                            </div>
                            <div class="w-form-fail">
                                <div>Oops! Something went wrong while submitting the form.</div>
                            </div>
                        </div>
                        <div class="w-richtext">
                            <h1>Phone Form Requirements</h1>
                            <p>The dropdown must:</p>
                            <ol start="" role="list">
                                <li>Get the countries&#x27; data from a public API.</li>
                                <li>Dynamically populate all the options in the dropdown.</li>
                                <li>Detect the user&#x27;s location and set his country as the default option.</li>
                                <li>Set a default selection when the geolocation fails.</li>
                                <li>Display the country code in the options list.</li>
                                <li>Display the country phone prefix in the selected option.</li>
                                <li>Update a hidden input with the country code selection.</li>
                                <li>Close if the user clicks outside the dropdown when it&#x27;s open.</li>
                                <li>Focus the first option that starts with any pressed key. For example: If the user
                                    presses the &quot;C&quot; letter, the browser must focus the &quot;CM&quot;
                                    (Cameroon) option.</li>
                            </ol>
                            <p>Optionally, the dropdown should:</p>
                            <ol start="1" role="list">
                                <li>Be fully accessible for keyboard navigation and screen reader users.</li>
                                <li>Store the user&#x27;s selection in a cookie or the local storage of the browser. If
                                    a stored selection exists, it must be displayed as the default option instead of
                                    geolocating the user.</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=606eee904b85d3a396305721"
        type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
    </script>
    <script src="js/webflow.js" type="text/javascript"></script>
    <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
    <script type="text/javascript">
        const ul = document.getElementById('countries_list');
        const select = document.getElementById('selectedOption');
        const icon_dropdown = document.getElementById('dropdown-icon');
        const url = 'https://restcountries.eu/rest/v2/all';
        const requestUrl = "http://ip-api.com/json";
        let country = '';

        function createNode(e) {
            return document.createElement(e);
        }

        function append(p, e) {
            return p.appendChild(e);
        }

        if (localStorage.getItem(country) !== null) {
            country = localStorage.getItem(country);
            fetch(`https://restcountries.eu/rest/v2/name/${country}`).then((res) => res.json())
                .then(function (data) {
                    let selected = data;
                    document.getElementById("selectedOption").innerHTML = "";
                    return selected.map(function (country) {
                        let mainDiv = createNode('div');
                        let img = createNode('img');
                        let div = createNode('div'); 
                        mainDiv.className = 'prefix-dropdown_toggle'
                        mainDiv.id = country.name;
                        img.loading = 'lazy';
                        img.className = 'prefix-dropdown_flag';
                        img.src = country.flag;
                        img.alt = `${country.name} Flag`;
                        div.className = 'prefix-dropdown_value';
                        div.innerHTML = `+${country.callingCodes}`;
                        append(mainDiv, img);
                        append(mainDiv, div);
                        append(mainDiv, icon_dropdown);
                        append(select, mainDiv);
                    })
                }).catch(function (error) {
                    console.log(error);
                });
        } else {
            $.ajax({
                url: requestUrl,
                type: 'GET',
                success: function (data) {
                    country = data.country;
                    localStorage.clear();
                    localStorage.setItem(country, 'country');
                    fetch(`https://restcountries.eu/rest/v2/name/${country}`).then((res) => res.json())
                        .then(function (data) {
                            let selected = data;
                            document.getElementById("selectedOption").innerHTML = "";
                            return selected.map(function (country) {
                                let mainDiv = createNode('div');
                                let img = createNode('img');
                                let div = createNode('div');
                                mainDiv.className = 'prefix-dropdown_toggle'
                                mainDiv.id = country.name;
                                img.loading = 'lazy';
                                img.className = 'prefix-dropdown_flag';
                                img.src = country.flag;
                                img.alt = `${country.name} Flag`;
                                div.className = 'prefix-dropdown_value';
                                div.innerHTML = `+${country.callingCodes}`;
                                append(mainDiv, img);
                                append(mainDiv, div);
                                append(mainDiv, icon_dropdown);
                                append(select, mainDiv);
                            })
                        }).catch(function (error) {
                            console.log(error);
                        });
                },
                error: function (err) {
                    console.log("Request failed, error= " + err);
                }
            });
        }

        fetch(url).then((res) => res.json()).then(function (data) {
            let countries = data;
            return countries.map(function (country) {
                let li = createNode('li');
                let img = createNode('img');
                let div = createNode('div');
                li.className = 'prefix-dropdown_item'
                li.setAttribute("onclick", "ongoing_click(this.id)");
                li.id = country.name;
                img.loading = 'lazy';
                img.className = 'prefix-dropdown_flag';
                img.src = country.flag;
                img.alt = `${country.name} Flag`;
                div.className = 'prefix-dropdown_value';
                div.innerHTML = `${country.alpha2Code}`;
                append(li, img);
                append(li, div);
                append(ul, li);
            });
        }).catch(function (error) {
            console.log(error);
        });

        $(document).click(function () {
            $("#prefix-dropdown-list").hide();
        });

        function ongoing_click(clicked_id) {
            country = clicked_id;
            localStorage.clear();
            localStorage.setItem(country, 'country');
            document.getElementById("selectedOption").innerHTML = "";
            fetch(`https://restcountries.eu/rest/v2/name/${country}`).then((res) => res.json())
                .then(function (data) {
                    let selected = data;
                    return selected.map(function (country) {
                        console.log(country.name);
                        let mainDiv = createNode('div');
                        let img = createNode('img');
                        let div = createNode('div');
                        mainDiv.className = 'prefix-dropdown_toggle'
                        mainDiv.id = country.name;
                        img.loading = 'lazy';
                        img.className = 'prefix-dropdown_flag';
                        img.src = country.flag;
                        img.alt = `${country.name} Flag`;
                        div.className = 'prefix-dropdown_value';
                        div.innerHTML = `+${country.callingCodes}`;
                        append(mainDiv, img);
                        append(mainDiv, div);
                        append(mainDiv, icon_dropdown);
                        append(select, mainDiv);
                    });
                }).catch(function (error) {
                    console.log(error);
                });
        }
        // document.querySelector('#selectedOption').addEventListener('keyup', function (e) {
        //     console.log(e.key)
        // })
    </script>
</body>

</html>